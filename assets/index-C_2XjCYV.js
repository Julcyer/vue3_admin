import{H as v,d as G,r as f,n as K,g as r,I as O,o as _,z as h,w as t,b as e,h as u,m as q,q as z,D as I,j as p,t as y,c as N,F as V,y as D,J as S,p as Q,k as W,_ as X}from"./index-DDpbq2o8.js";const Y=(l,s)=>v.get(`/admin/product/list/${l}/${s}`),Z=l=>v.get("/admin/product/onSale/"+l),ee=l=>v.get("/admin/product/cancelSale/"+l),te=l=>v.get("/admin/product/getSkuInfo/"+l),ae=l=>v.delete("/admin/product/deleteSku/"+l),le=l=>(Q("data-v-a10cac7b"),l=l(),W(),l),ne=["src"],se=le(()=>q("h4",null,"查看商品的详情",-1)),oe=["src"],re=G({__name:"index",setup(l){let s=f(1),x=f(10),B=f(0),b=f([]),k=f(!1),c=f({});K(()=>{m()});const m=async(i=1)=>{s.value=i;let n=await Y(s.value,x.value);n.code==200&&(B.value=n.data.total,b.value=n.data.records)},U=i=>{m()},F=async i=>{i.isSale==1?(await ee(i.id),S({type:"success",message:"下架成功"}),m(s.value)):(await Z(i.id),S({type:"success",message:"上架成功"}),m(s.value))},$=async i=>{k.value=!0;let n=await te(i.id);c.value=n.data},j=async i=>{(await ae(i)).code==200?(S({type:"success",message:"删除成功"}),m(b.value.length>1?s.value:s.value-1)):S({type:"error",message:"系统数据不能删除"})};return(i,n)=>{const d=r("el-table-column"),w=r("el-button"),E=r("el-popconfirm"),H=r("el-table"),M=r("el-pagination"),o=r("el-col"),g=r("el-row"),L=r("el-tag"),R=r("el-carousel-item"),T=r("el-carousel"),J=r("el-drawer"),P=r("el-card"),C=O("btn");return _(),h(P,null,{default:t(()=>[e(H,{border:"",style:{margin:"10px 0px"},data:u(b)},{default:t(()=>[e(d,{label:"序号",type:"index",align:"center",width:"80px"}),e(d,{label:"名称","show-overflow-tooltip":"",align:"center",width:"150px",prop:"skuName"}),e(d,{label:"描述","show-overflow-tooltip":"",align:"center","min-width":"150px",prop:"skuDesc"}),e(d,{label:"图片",align:"center",width:"150px"},{default:t(({row:a})=>[q("img",{src:a.skuDefaultImg,alt:"",style:{width:"100px",height:"100px"}},null,8,ne)]),_:1}),e(d,{label:"重量",align:"center",width:"150px",prop:"weight"}),e(d,{label:"价格",align:"center",width:"150px",prop:"price"}),e(d,{label:"操作",align:"center",width:"250px",fixed:"right"},{default:t(({row:a})=>[z(e(w,{type:"primary",size:"small",icon:a.isSale==1?"Bottom":"Top",onClick:A=>F(a),title:a.isSale==1?"上架商品":"下架商品"},null,8,["icon","onClick","title"]),[[C,"btn.Sku.updown"]]),z(e(w,{type:"primary",size:"small",icon:"InfoFilled",onClick:A=>$(a),title:"查看商品详情"},null,8,["onClick"]),[[C,"btn.Sku.detail"]]),e(E,{title:`你确定要删除${a.skuName}?`,width:"200px",onConfirm:A=>j(a.id)},{reference:t(()=>[z(e(w,{type:"primary",size:"small",icon:"Delete",title:"删除"},null,512),[[C,"btn.Sku.remove"]])]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),e(M,{"current-page":u(s),"onUpdate:currentPage":n[0]||(n[0]=a=>I(s)?s.value=a:s=a),"page-size":u(x),"onUpdate:pageSize":n[1]||(n[1]=a=>I(x)?x.value=a:x=a),"page-sizes":[10,20,30,40],background:!0,layout:"prev, pager, next, jumper,->,sizes,total",total:u(B),onCurrentChange:m,onSizeChange:U},null,8,["current-page","page-size","total"]),e(J,{modelValue:u(k),"onUpdate:modelValue":n[2]||(n[2]=a=>I(k)?k.value=a:k=a)},{header:t(()=>[se]),default:t(()=>[e(g,{style:{margin:"10px 0px"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[p("名称")]),_:1}),e(o,{span:18},{default:t(()=>[p(y(u(c).skuName),1)]),_:1})]),_:1}),e(g,{style:{margin:"10px 0px"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[p("描述")]),_:1}),e(o,{span:18},{default:t(()=>[p(y(u(c).skuDesc),1)]),_:1})]),_:1}),e(g,{style:{margin:"10px 0px"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[p("价格")]),_:1}),e(o,{span:18},{default:t(()=>[p(y(u(c).price),1)]),_:1})]),_:1}),e(g,{style:{margin:"10px 0px"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[p("平台属性")]),_:1}),e(o,{span:18},{default:t(()=>[(_(!0),N(V,null,D(u(c).skuAttrValueList,a=>(_(),h(L,{style:{margin:"5px"},key:a.id},{default:t(()=>[p(y(a.valueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(g,{style:{margin:"10px 0px"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[p("销售属性")]),_:1}),e(o,{span:18},{default:t(()=>[(_(!0),N(V,null,D(u(c).skuSaleAttrValueList,a=>(_(),h(L,{style:{margin:"5px"},key:a.id},{default:t(()=>[p(y(a.saleAttrValueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(g,{style:{margin:"10px 0px"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[p("商品图片")]),_:1}),e(o,{span:18},{default:t(()=>[e(T,{interval:4e3,type:"card",height:"200px"},{default:t(()=>[(_(!0),N(V,null,D(u(c).skuImageList,a=>(_(),h(R,{key:a.id},{default:t(()=>[q("img",{src:a.imgUrl,alt:"",style:{width:"100%",height:"100%"}},null,8,oe)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),ue=X(re,[["__scopeId","data-v-a10cac7b"]]);export{ue as default};
